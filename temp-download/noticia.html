<!DOCTYPE html>
<html lang="pt-BR">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Not√≠cia | TEM VENDA</title>
	<link rel="icon" href="/favicon.ico">
	<link rel="icon" type="image/png" href="/favicon-32.png" sizes="32x32">
	<style>
		body{font-family:Inter,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif;margin:0;color:#111}
		.header{position:sticky;top:0;background:#fff;border-bottom:1px solid #eee;padding:12px 0;z-index:10}
		.container{max-width:920px;margin:0 auto;padding:0 16px}
		.logo{display:flex;align-items:center;gap:10px;color:#111;text-decoration:none;font-weight:800}
		.logo img{height:28px}
		.article{padding:28px 0}
		.title{font-size:34px;font-weight:900;line-height:1.15;margin:8px 0 12px}
		.meta{color:#666;font-size:14px;margin-bottom:20px}
		.content{font-size:18px;line-height:1.75}
		.content img{max-width:100%;height:auto}
		.back{display:inline-block;margin:24px 0;color:#0a7e00;text-decoration:none;font-weight:700}
	</style>
</head>
<body>
	<div class="header">
		<div class="container">
			<a href="/central-inteligencia.html" class="logo"><img src="/logo-temvenda.png" alt="TEM VENDA"> TEM VENDA</a>
		</div>
	</div>
	<div class="container">
		<a href="/central-inteligencia.html" class="back">‚Üê Voltar √†s not√≠cias</a>
		<div id="article" class="article">
			<div class="title" id="title">Carregando...</div>
			<div class="meta" id="meta"></div>
			<div class="content" id="content"></div>
		</div>
	</div>
	<script>
		const SUPABASE_URL = 'https://mgcoyeohqelystqmytah.supabase.co';
		const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1nY295ZW9ocWVseXN0cW15dGFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE2NzAzNjQsImV4cCI6MjA3NzI0NjM2NH0.KBKHH10DaV0m5SroFmXsTedS_dalcAprKnUOI4Unkx4';
		function getParam(name){ const u=new URL(location.href); return u.searchParams.get(name); }
		async function loadArticle(){
			const slug = getParam('slug');
			if(!slug){ document.getElementById('title').textContent='Not√≠cia n√£o encontrada'; return; }
			try{
				const res = await fetch(`${SUPABASE_URL}/rest/v1/news_articles?select=*,news_categories(name),news_sources(name)&slug=eq.${encodeURIComponent(slug)}&limit=1`,{
					headers:{ apikey: SUPABASE_KEY, Authorization:`Bearer ${SUPABASE_KEY}` }
				});
				if(!res.ok){ throw new Error('Falha ao buscar not√≠cia'); }
				const data = await res.json();
				if(!data || !data.length){ document.getElementById('title').textContent='Not√≠cia n√£o encontrada'; return; }
				const a = data[0];
				document.getElementById('title').textContent = a.title || 'Sem t√≠tulo';
				const dateStr = a.published_at ? new Date(a.published_at).toLocaleDateString('pt-BR') : '';
				document.getElementById('meta').textContent = `${a.news_sources?.name||'Fonte'} ‚Ä¢ ${dateStr} ‚Ä¢ ${a.news_categories?.name||'Categoria'}`;
				const contentEl = document.getElementById('content');
				let html = a.content || a.executive_summary || a.excerpt || '';
				try{ if (typeof a.commercial_analysis === 'string') a.commercial_analysis = JSON.parse(a.commercial_analysis);}catch(_){}
				if (a.commercial_analysis) {
					html += `<div style="margin-top:24px;padding:16px;border-left:4px solid #5ee100;background:#f6fff3"><strong>üí° Insights:</strong> ${a.commercial_analysis.sales_opportunities||''}</div>`;
				}
				contentEl.innerHTML = html;
			} catch(e){
				document.getElementById('title').textContent='Erro ao carregar not√≠cia';
			}
		}
		document.addEventListener('DOMContentLoaded', loadArticle);
	</script>
</body>
</html>
